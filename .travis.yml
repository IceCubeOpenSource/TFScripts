language: python

notifications:
  email: false

python:
  - '2.7'
  - '3.5'
  - '3.6'
  - '3.7'

dist: bionic

before_install:
  - python --version
  - pip install -U pip
  - pip install -U -r test_requirements.txt
  - pip install -U -r requirements.txt
  - py_version=$(python -c "import platform; print(platform.python_version())")
  - if [[ $py_version == "2."* ]]; then pip install -U tensorflow==1.15.0; else pip install -U tensorflow==1.15.2; fi

install:
  - pip install ".[test]" . # install package + test dependencies

script:
  - coverage run -m unittest discover # run tests
  - coverage report -m # report to console

after_success:
  - codecov # submit coverage

# deploy:
#   provider: pypi
#   user:
#     secure: YOUR_PYPI_USER_PUBLIC_SECRET_HERE
#   password:
#     secure: YOUR_PYPI_PASS_PUBLIC_SECRET_HERE
#   on:
#     tags: true
